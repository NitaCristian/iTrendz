@page "/campaigns/influencer/{Id:int}"
@inject ICampaignService CampaignService

<TwoPaneLayout>
    <LeftContent>
        <CampaignHeader ImageUrl="@_campaign.ImageUrl" Title="@_campaign.Title" Brand="_campaign.Brand"/>
        <CampaignInfo Campaign="_campaign"/>
    </LeftContent>
    <RightContent>
        <MudStack>
            <CampaignDescription Description="@_campaign.Description"/>
            <CampaignInfluencerRequirements Requirements="_campaign.Criteria"/>
            <CampaignPlatforms Platforms="GetPlatforms()"/>
            <CampaignPlatformDeliverables Deliverables="_campaign.Requirements"/>
        </MudStack>
    </RightContent>
</TwoPaneLayout>

@code {
    [Parameter] public int Id { get; set; }

    private Campaign _campaign;

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(10000);

        _campaign = await CampaignService.GetCampaignAsync(Id);
    }

    public List<Platform> GetPlatforms()
    {
        return _campaign.Requirements
            .Select(requirement => requirement.Platform)
            .Distinct()
            .ToList();
    }


}