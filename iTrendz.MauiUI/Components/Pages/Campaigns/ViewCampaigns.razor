@page "/campaigns/all"
@inject ICampaignService CampaignService

<MudStack Spacing="4">
    @foreach (var campaign in _campaigns)
    {
        <MudPaper Class="pa-2" Elevation="5">
            <MudGrid>
                <MudItem xs="4">
                    <MudImage Src="@campaign.ImageUrl" Fluid="true" Alt="Random Image" Elevation="25" Class="rounded-lg ma-4"/>
                </MudItem>
                <MudItem xs="8">
                    <MudText Typo="Typo.h5">@campaign.Title</MudText>
                    <MudText Typo="Typo.h6">Black-view Watch R3 Pro Pink</MudText>
                    <MudText Typo="Typo.subtitle1">by @campaign.Brand.UserName</MudText>

                    <MudText>Campaign Period: <MudChip T="string">05/25/2022</MudChip> - <MudChip T="string">06/03/2022</MudChip></MudText>
                    <MudText>Creators Wanted: <MudChip T="string">@campaign.Contracts.Count/@campaign.CreatorLimit</MudChip></MudText>
                    <CampaignInfluencerRequirements Requirements="campaign.Criteria"/>
                    <MudText>@campaign.Description</MudText>

                    <MudButton Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Send" Color="Color.Primary">Apply</MudButton>
                </MudItem>
            </MudGrid>
        </MudPaper>
    }
</MudStack>

@code {
    private IEnumerable<Campaign>? _campaigns;

    protected override async Task OnInitializedAsync()
    {
        _campaigns = await CampaignService.GetAllCampaignsAsync();
    }

}